<!--_meta 作为公共模版分离出去-->
<!DOCTYPE HTML>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport"
	content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<link rel="Bookmark" href="favicon.ico">
<link rel="Shortcut Icon" href="favicon.ico" />
<!--[if lt IE 9]>
<script type="text/javascript" src="static/lib/html5.js"></script>
<script type="text/javascript" src="static/lib/respond.min.js"></script>
<![endif]-->

<link rel="stylesheet" type="text/css"
	th:href="@{~/static/static/h-ui/css/H-ui.min.css}" />
<link rel="stylesheet" type="text/css"
	th:href="@{~/static/static/h-ui.admin/css/H-ui.admin.css}" />
<link rel="stylesheet" type="text/css"
	th:href="@{~/static/lib/Hui-iconfont/1.0.8/iconfont.css}" />

<link rel="stylesheet" type="text/css"
	th:href="@{~/static/static/h-ui.admin/skin/default/skin.css}" id="skin" />
<link rel="stylesheet" type="text/css"
	th:href="@{~/static/static/h-ui.admin/css/style.css}" />
<style type="text/css">
.select1 {
	margin: 0px auto 0;
	width: 965px;
}
</style>
<title>项目列表 - 项目管理 - 预算汇总系统</title>
<meta name="keywords"
	content="H-ui.admin v3.0,H-ui网站后台模版,后台模版下载,后台管理系统模版,HTML后台模版下载">
<meta name="description"
	content="H-ui.admin v3.0，是一款由国人开发的轻量级扁平化网站后台模板，完全免费开源的网站后台管理系统模版，适合中小型CMS后台系统。">
</head>
<body>
	<!--_header 作为公共模版分离出去-->
	<header class="navbar-wrapper">
		<div class="navbar navbar-fixed-top">
			<div class="container-fluid cl">
				<a class="logo navbar-logo f-l mr-10 hidden-xs" href="/index">预算汇总系统</a>
				<a class="logo navbar-logo-m f-l mr-10 visible-xs"
					href="/aboutHui.shtml">H-ui</a> <span
					class="logo navbar-slogan f-l mr-10 hidden-xs"></span> <a
					aria-hidden="false" class="nav-toggle Hui-iconfont visible-xs"
					href="javascript:;">&#xe667;</a>
				<nav class="nav navbar-nav">
					<ul class="cl">
						<li class="dropDown dropDown_hover"><a href="javascript:;"
							class="dropDown_A"><i class="Hui-iconfont">&#xe600;</i> 新增 <i
								class="Hui-iconfont">&#xe6d5;</i></a>
							<ul class="dropDown-menu menu radius box-shadow">
								<li><a href="javascript:;"
									onclick="article_add('添加项目','article-add.html')"><i
										class="Hui-iconfont">&#xe616;</i> 项目</a></li>
								<li><a href="javascript:;"
									onclick="picture_add('添加项目','picture-add.html')"><i
										class="Hui-iconfont">&#xe613;</i> 用户</a></li>
								<li><a href="javascript:;"
									onclick="product_add('添加项目','product-add.html')"><i
										class="Hui-iconfont">&#xe620;</i> 部门</a></li>
								<li><a href="javascript:;"
									onclick="member_add('添加用户','member-add.html','','510')"><i
										class="Hui-iconfont">&#xe60d;</i> 供应商</a></li>
							</ul></li>
					</ul>
				</nav>
				<nav id="Hui-userbar"
					class="nav navbar-nav navbar-userbar hidden-xs">
					<ul class="cl">
						<li th:text='${BssProjectPerson.xm}'></li>
						<li class="dropDown dropDown_hover"><a href="#"
							class="dropDown_A"><span
								th:text='${BssProjectPerson.username}'></span> <i
								class="Hui-iconfont">&#xe6d5;</i></a>
							<ul class="dropDown-menu menu radius box-shadow">
								<li><a href="javascript:;" onClick="myselfinfo()">个人信息</a></li>
								<li><a href="javascript:;" onClick="logOut(1)">切换账户</a></li>
								<li><a href="javascript:;" onClick="logOut(2)">退出</a></li>
							</ul></li>
						<li id="Hui-msg"><a href="#" title="消息"> <span
								class="badge badge-danger">1</span> <i class="Hui-iconfont"
								style="font-size: 18px">&#xe68a;</i></a></li>
						<li id="Hui-skin" class="dropDown right dropDown_hover"><a
							href="javascript:;" class="dropDown_A" title="换肤"><i
								class="Hui-iconfont" style="font-size: 18px">&#xe62a;</i></a>
							<ul class="dropDown-menu menu radius box-shadow">
								<li><a href="javascript:;" data-val="default"
									title="默认（黑色）">默认（黑色）</a></li>
								<li><a href="javascript:;" data-val="blue" title="蓝色">蓝色</a>
								</li>
								<li><a href="javascript:;" data-val="green" title="绿色">绿色</a>
								</li>
								<li><a href="javascript:;" data-val="red" title="红色">红色</a>
								</li>
								<li><a href="javascript:;" data-val="yellow" title="黄色">黄色</a>
								</li>
								<li><a href="javascript:;" data-val="orange" title="橙色">橙色</a></li>
							</ul></li>
					</ul>
				</nav>
			</div>
		</div>
	</header>
	<!--/_header 作为公共模版分离出去-->

	<!--_menu 作为公共模版分离出去-->
	<aside class="Hui-aside">

		<div class="menu_dropdown bk_2">
			<dl id="menu-article">
				<dt style="">
					<i class="Hui-iconfont">&#xe616;</i> 项目管理<i
						class="Hui-iconfont menu_dropdown-arrow">&#xe6d5;</i>
				</dt>
				<dd style="display: block">
					<ul>
						<li class="current"><a href="article-list.html" title="项目信息">项目信息</a></li>
						<li><a href="article-list.html" title="费用信息">费用信息</a></li>
					</ul>
				</dd>
			</dl>
			<dl id="menu-article">
				<dt>
					<i class="Hui-iconfont">&#xe616;</i> 供应商管理<i
						class="Hui-iconfont menu_dropdown-arrow">&#xe6d5;</i>
				</dt>
				<dd>
					<ul>
						<li><a href="article-list.html" title="供应商信息">供应商信息</a></li>
					</ul>
				</dd>
			</dl>
			<dl id="menu-article">
				<dt>
					<i class="Hui-iconfont">&#xe616;</i> 合同管理<i
						class="Hui-iconfont menu_dropdown-arrow">&#xe6d5;</i>
				</dt>
				<dd>
					<ul>
						<li><a href="article-list.html" title="合同信息">合同信息</a></li>
					</ul>
				</dd>
			</dl>

			<dl id="menu-admin">
				<dt>
					<i class="Hui-iconfont">&#xe62d;</i> 管理员管理<i
						class="Hui-iconfont menu_dropdown-arrow">&#xe6d5;</i>
				</dt>
				<dd>
					<ul>
						<li><a href="admin-role.html" title="角色管理">角色管理</a></li>
						<li><a href="admin-permission.html" title="权限管理">权限管理</a></li>
						<li><a href="admin-list.html" title="管理员列表">管理员列表</a></li>
					</ul>
				</dd>
			</dl>
			<dl id="menu-tongji">
				<dt>
					<i class="Hui-iconfont">&#xe61a;</i>数据统计<i
						class="Hui-iconfont menu_dropdown-arrow">&#xe6d5;</i>
				</dt>
				<dd>
					<ul>
						<li><a href="charts-1.html" title="折线图">折线图</a></li>
						<li><a href="charts-2.html" title="时间轴折线图">时间轴折线图</a></li>
						<li><a href="charts-3.html" title="区域图">区域图</a></li>
						<li><a href="charts-4.html" title="柱状图">柱状图</a></li>
						<li><a href="charts-5.html" title="饼状图">饼状图</a></li>
						<li><a href="charts-6.html" title="3D柱状图">3D柱状图</a></li>
						<li><a href="charts-7.html" title="3D饼状图">3D饼状图</a></li>
					</ul>
				</dd>
			</dl>
			<dl id="menu-system">
				<dt>
					<i class="Hui-iconfont">&#xe62e;</i> 系统管理<i
						class="Hui-iconfont menu_dropdown-arrow">&#xe6d5;</i>
				</dt>
				<dd>
					<ul>
						<li><a href="system-base.html" title="系统设置">系统设置</a></li>
						<li><a href="system-category.html" title="栏目管理">栏目管理</a></li>
						<li><a href="system-data.html" title="数据字典">数据字典</a></li>
						<li><a href="system-shielding.html" title="屏蔽词">屏蔽词</a></li>
						<li><a href="system-log.html" title="系统日志">系统日志</a></li>
					</ul>
				</dd>
			</dl>
		</div>
	</aside>
	<div class="dislpayArrow hidden-xs">
		<a class="pngfix" href="javascript:void(0);"
			onClick="displaynavbar(this)"></a>
	</div>
	<!--/_menu 作为公共模版分离出去-->

	<section class="Hui-article-box">
		<nav class="breadcrumb">
			<i class="Hui-iconfont">&#xe67f;</i> 首页 <span class="c-gray en">&gt;</span>
			项目管理 <span class="c-gray en">&gt;</span> 项目列表 <a
				class="btn btn-success radius r"
				style="line-height: 1.6em; margin-top: 3px"
				href="javascript:location.replace(location.href);" title="刷新"><i
				class="Hui-iconfont">&#xe68f;</i></a>
		</nav>
		<div class="Hui-article">
			<article class="cl pd-20">
				<div class="text-c">
					<span class="select-box inline radius"> <select name=""
						class="select radius">
							<option class="select radius" value="0">全部分类</option>
							<option value="1">分类一</option>
							<option value="2">分类二</option>
					</select>
					</span> 
					<input type="text" name="" id="infoText" placeholder=" 项目内容"
						style="width: 250px" class="input-text radius">
					<button name="" id="" onclick="findDim()"
						class="btn btn-success radius" type="submit">
						<i class="Hui-iconfont">&#xe665;</i> 搜一搜
					</button>
				</div>
				<form enctype="multipart/form-data" id="batchUpload"
						action="/excel/import" method="post" class="form-horizontal">
				<div class="cl pd-5 bg-1 bk-gray mt-20">
					<span class="l"> <a href="javascript:;"
						onclick="batchOfDelete(0)" class="btn btn-danger radius"><i
							class="Hui-iconfont">&#xe6e2;</i> 批量删除</a> <a
						class="btn btn-primary radius" data-title="添加项目"
						_href="showAddProject"
						onclick="article_add('添加项目','showAddProject')"
						href="javascript:;"><i class="Hui-iconfont">&#xe600;</i> 新增项目</a>
					</span>&nbsp;
					<!-- 从Excel导入项目 -->
						<span class="btn-upload form-group"> <input
							placeholder="请选择需要导入的Excel文件"
							class="input-text upload-url radius" type="text"
							name="uploadfile-1" id="uploadEventPath" readonly> <input
							type="file" multiple name="file" id="uploadEventFile"
							class="input-file">
						</span>
					<a onclick="importExcel()" class="btn btn-primary radius"><i
						class="Hui-iconfont">&#xe603;</i>导入项目数据</a> <span class="r">共有数据：<strong
						th:text='${listSize}'></strong> 条
					</span>
				</div>
				</form>
				<div class="mt-20">
					<table
						class="table table-border table-bordered table-bg table-hover table-sort"
						style="word-break: keep-all">
						<thead>
							<tr class="text-c">
								<th width="25"><input type="checkbox" name="" value=""></th>
								<th width="50" nowrap>ID</th>
								<th nowrap>项目名称</th>
								<th width="80">负责人</th>
								<th width="70">类型</th>
								<th width="60">所属地</th>
								<th width="75">费用归属部门</th>
								<th width="50">确定性</th>
								<th width="60">是否立项</th>
								<th width="120">操作</th>
							</tr>
						</thead>
						<div th:fragment="tbodyList">
							<tbody id="tbodyList">
								<tr class="text-c" th:each="item:${showArticleList}">
									<input type="hidden" id="caozuo" th:value="${item.id}">
									<td><input type="checkbox" th:value="${item.id}" name=""></td>
									<td th:text='${item.id}' nowrap></td>
									<td class="text-l" nowrap><u th:text='${item.xmmc}'
										style="cursor: pointer" class="text-primary"
										onClick="article_find('查看','showProjectInfoDetails',this)"
										title="查看"></u></td>
									<td th:text='${item.xm}' nowrap></td> 						
									<td th:text='${item.xmlx}' nowrap></td>
									<td th:text='${item.ssd}' nowrap></td>
									<td th:text='${item.bmmc}' nowrap></td>
									<td th:text='${item.qdx}' nowrap></td>
									<td class="td-status"><span
										class="label label-success radius" th:text='${item.sflx}'></span></td>
									<td class="f-14 td-manage"><a
										style="text-decoration: none" class="ml-5"
										onClick="article_edit('项目编辑',this)"
										href="javascript:;" title="编辑"><i class="Hui-iconfont">&#xe6df;</i></a>
										<a style="text-decoration: none" class="ml-5"
										onClick="batchOfDelete(this)" href="javascript:;" title="删除"><i
											class="Hui-iconfont">&#xe6e2;</i></a></td>
								</tr>
							</tbody>
						</div>
					</table>
				</div>
			</article>
		</div>
	</section>


	<!--/请在上方写此页面业务相关的脚本-->
</body>
<!--_footer 作为公共模版分离出去-->
<script type="text/javascript"
	src="static/lib/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="static/js/select2.full.min.js"></script>
<script type="text/javascript" src="static/lib/layer/2.4/layer.js"></script>
<script type="text/javascript" src="static/static/h-ui/js/H-ui.js"></script>
<script type="text/javascript"
	src="static/static/h-ui.admin/js/H-ui.admin.page.js"></script>
<!--/_footer /作为公共模版分离出去-->

<!--请在下方写此页面业务相关的脚本-->
<script type="text/javascript"
	src="static/lib/My97DatePicker/4.8/WdatePicker.js"></script>
<script type="text/javascript"
	src="static/lib/datatables/1.10.0/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="static/lib/laypage/1.2/laypage.js"></script>
<script type="text/javascript" src="static/js/common.js"></script>
<script type="text/javascript" src="static/js/excelUtil.js"></script>
<script type="text/javascript">
	$(function() {
		$('.mySelect').select2();
	})
	/*项目-添加*/
	function article_add(title, url, w, h) {
		var index = layer.open({
			type : 2,
			title : title,
			content : url
		});
		layer.full(index);
	}
	/*项目-编辑*/
	function article_edit(title,obj) {
		 var projectId = $(obj).parents("tr").find("#caozuo").val()
		var index = layer.open({
			type : 2,
			title : title,
			area : [ '893px', '600px' ],
			content : 'showEditProject.do?projectId='+projectId
		});
		layer.full(index);
	}
	/*项目-查看*/
	function article_find(title, url, obj) {
		var projectId = $(obj).parents("tr").find("#caozuo").val()
		var index = layer.open({
			type : 2,
			title : title,
			area : [ '893px', '600px' ],
			content : url+'?projectId='+projectId
		});
		layer.full(index);
	}

	/*项目-审核*/
	function article_shenhe(obj, id) {
		layer
				.confirm(
						'审核文章？',
						{
							btn : [ '通过', '不通过', '取消' ],
							shade : false,
							closeBtn : 0
						},
						function() {
							$(obj)
									.parents("tr")
									.find(".td-manage")
									.prepend(
											'<a class="c-primary" onClick="article_start(this,id)" href="javascript:;" title="申请上线">申请上线</a>');
							$(obj)
									.parents("tr")
									.find(".td-status")
									.html(
											'<span class="label label-success radius">已发布</span>');
							$(obj).remove();
							layer.msg('已发布', {
								icon : 6,
								time : 1000
							});
						},
						function() {
							$(obj)
									.parents("tr")
									.find(".td-manage")
									.prepend(
											'<a class="c-primary" onClick="article_shenqing(this,id)" href="javascript:;" title="申请上线">申请上线</a>');
							$(obj)
									.parents("tr")
									.find(".td-status")
									.html(
											'<span class="label label-danger radius">未通过</span>');
							$(obj).remove();
							layer.msg('未通过', {
								icon : 5,
								time : 1000
							});
						});
	}
	/*项目-下架*/
	function article_stop(obj, id) {
		layer
				.confirm(
						'确认要下架吗？',
						function(index) {
							$(obj)
									.parents("tr")
									.find(".td-manage")
									.prepend(
											'<a style="text-decoration:none" onClick="article_start(this,id)" href="javascript:;" title="发布"><i class="Hui-iconfont">&#xe603;</i></a>');
							$(obj)
									.parents("tr")
									.find(".td-status")
									.html(
											'<span class="label label-defaunt radius">已下架</span>');
							$(obj).remove();
							layer.msg('已下架!', {
								icon : 5,
								time : 1000
							});
						});
	}

	/*项目-发布*/
	function article_start(obj, id) {
		layer
				.confirm(
						'确认要发布吗？',
						function(index) {
							$(obj)
									.parents("tr")
									.find(".td-manage")
									.prepend(
											'<a style="text-decoration:none" onClick="article_stop(this,id)" href="javascript:;" title="下架"><i class="Hui-iconfont">&#xe6de;</i></a>');
							$(obj)
									.parents("tr")
									.find(".td-status")
									.html(
											'<span class="label label-success radius">已发布</span>');
							$(obj).remove();
							layer.msg('已发布!', {
								icon : 6,
								time : 1000
							});
						});
	}
	/*项目-申请上线*/
	function article_shenqing(obj, id) {
		$(obj).parents("tr").find(".td-status").html(
				'<span class="label label-default radius">待审核</span>');
		$(obj).parents("tr").find(".td-manage").html("");
		layer.msg('已提交申请，耐心等待审核!', {
			icon : 1,
			time : 2000
		});
	}
	/*项目搜索*/
	function findDim() {
		var infoText = $("#infoText").val();
		$("#tbodyList").load("/showProjectInfoSelect.do?infoText=" + infoText);
	}
	/*项目删除*/
	function batchOfDelete(obj) {
		var chk_value = [];
		if (obj == 0) {//批量删除
			$('input[type=checkbox]:checked').each(function() {
				chk_value.push($(this).val());
			});
		} else {//单条删除
			chk_value.push($(obj).parents("tr").find("#caozuo").val());
		}
		layer.confirm('确认要删除吗？', function(index) {
			$.ajax({
				type : 'POST',
				url : '/deleteProjectInfo',
				contentType : 'application/json',
				data : JSON.stringify(chk_value),
				success : function(data) {
					if (data.code == "1") {
						$(obj).parents("tr").remove();
						layer.msg('已删除!', {
							icon : 1,
							time : 1000
						});
					} else if (data.code == "-1") {
						layer.confirm('无法删除ID为' + data.projectIdList
								+ '的项目，请先删除对应的单价信息!', {
							icon : 2,
						});
					} else {
						layer.msg('删除失败!', {
							icon : 2,
							time : 2000
						});
					}
				},
				error : function(data) {
					console.log(data.msg);
				},
			});
		});
	}
</script>
</html>